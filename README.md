**Technologies Used**

Springboot, java8, java reactive programming (webflux), junit

**How to Run**

1.  Download code from <https://github.com/rachanaSane/rest-client>

2.  Make sure you have java 8 installed on your machine

3.  Go to the folder where you have downloaded the code

4.  Create jar file using -\> mvn clean package

5.  Execute code using

java -jar target/consume-rest-0.0.1-SNAPSHOT.jar

**Important points to note**

-   Webservice exposed by energy Australia is sometimes not ready to
    provide results if you fire multiple requests one after another. In
    such scenario, you will see below message in the console :

\*\*\*\*\* External Energy Australia Service is not ready yet. Please
try again after few minutes.\*\*\*\*\*

If you try to run code again after 2/3 minutes, it will work correctly.

-   Expected output could be found on console printed in JSON format
    below text \"Resulted Record Labels Structure\"

**Assumptions**

-   Empty string is considered valid value for record label as well as
    for music festival name once.

-   Output will be printed on console. Output format would be in JSON
    structure like below:

{

\"RecordLabel1\" : \[ {

\"bandName\" : \"band1\",

\"musicFestivals\" : \[ \"festival1\",\"festival2\"\]

} \],

\"RecordLabel2\" : \[ {

\"bandName\" : \"band1\",

\"musicFestivals\" : \[ \"fest1\" \]

}, {

\"bandName\" : \"band2\",

\"musicFestivals\" : \[ \]

} \]

}

-   Energy Australia API is not available to handle too many requests
    made by client. So, you will have to wait between multiple calls and
    might throw 429 TOO\_MANY\_REQUESTS Too Many Requests error.

**Things could have improved**

-   Better test coverage

-   Retry logic when external service is not ready

**Sample output produced by programme**

**Input received will be printed as :**

\[ {

\"name\" : \"LOL-palooza\",

\"bands\" : \[ {

\"name\" : \"Jill Black\",

\"recordLabel\" : \"Fourth Woman Records\"

}, {

\"name\" : \"Werewolf Weekday\",

\"recordLabel\" : \"XS Recordings\"

}, {

\"name\" : \"Winter Primates\",

\"recordLabel\" : \"\"

}, {

\"name\" : \"Frank Jupiter\",

\"recordLabel\" : \"Pacific Records\"

} \]

}, {

\"name\" : \"Small Night In\",

\"bands\" : \[ {

\"name\" : \"Yanke East\",

\"recordLabel\" : \"MEDIOCRE Music\"

}, {

\"name\" : \"Wild Antelope\",

\"recordLabel\" : \"Marner Sis. Recording\"

}, {

\"name\" : \"Squint-281\",

\"recordLabel\" : \"Outerscope\"

}, {

\"name\" : \"The Black Dashes\",

\"recordLabel\" : \"Fourth Woman Records\"

}, {

\"name\" : \"Green Mild Cold Capsicum\",

\"recordLabel\" : \"Marner Sis. Recording\"

} \]

}, {

\"name\" : \"Trainerella\",

\"bands\" : \[ {

\"name\" : \"Wild Antelope\",

\"recordLabel\" : \"Still Bottom Records\"

}, {

\"name\" : \"Manish Ditch\",

\"recordLabel\" : \"ACR\"

}, {

\"name\" : \"Adrian Venti\",

\"recordLabel\" : \"Monocracy Records\"

}, {

\"name\" : \"YOUKRANE\",

\"recordLabel\" : \"Anti Records\"

} \]

}, {

\"name\" : \"Twisted Tour\",

\"bands\" : \[ {

\"name\" : \"Auditones\",

\"recordLabel\" : \"Marner Sis. Recording\"

}, {

\"name\" : \"Squint-281\",

\"recordLabel\" : null

}, {

\"name\" : \"Summon\",

\"recordLabel\" : \"Outerscope\"

} \]

}, {

\"name\" : null,

\"bands\" : \[ {

\"name\" : \"Critter Girls\",

\"recordLabel\" : \"ACR\"

}, {

\"name\" : \"Propeller\",

\"recordLabel\" : \"Pacific Records\"

} \]

} \]

**Output generated by code:**

{

\"\" : \[ {

\"bandName\" : \"Winter Primates\",

\"musicFestivals\" : \[ \"LOL-palooza\" \]

} \],

\"ACR\" : \[ {

\"bandName\" : \"Critter Girls\",

\"musicFestivals\" : \[ \]

}, {

\"bandName\" : \"Manish Ditch\",

\"musicFestivals\" : \[ \"Trainerella\" \]

} \],

\"Anti Records\" : \[ {

\"bandName\" : \"YOUKRANE\",

\"musicFestivals\" : \[ \"Trainerella\" \]

} \],

\"Fourth Woman Records\" : \[ {

\"bandName\" : \"Jill Black\",

\"musicFestivals\" : \[ \"LOL-palooza\" \]

}, {

\"bandName\" : \"The Black Dashes\",

\"musicFestivals\" : \[ \"Small Night In\" \]

} \],

\"MEDIOCRE Music\" : \[ {

\"bandName\" : \"Yanke East\",

\"musicFestivals\" : \[ \"Small Night In\" \]

} \],

\"Marner Sis. Recording\" : \[ {

\"bandName\" : \"Auditones\",

\"musicFestivals\" : \[ \"Twisted Tour\" \]

}, {

\"bandName\" : \"Green Mild Cold Capsicum\",

\"musicFestivals\" : \[ \"Small Night In\" \]

}, {

\"bandName\" : \"Wild Antelope\",

\"musicFestivals\" : \[ \"Small Night In\" \]

} \],

\"Monocracy Records\" : \[ {

\"bandName\" : \"Adrian Venti\",

\"musicFestivals\" : \[ \"Trainerella\" \]

} \],

\"Outerscope\" : \[ {

\"bandName\" : \"Squint-281\",

\"musicFestivals\" : \[ \"Small Night In\" \]

}, {

\"bandName\" : \"Summon\",

\"musicFestivals\" : \[ \"Twisted Tour\" \]

} \],

\"Pacific Records\" : \[ {

\"bandName\" : \"Frank Jupiter\",

\"musicFestivals\" : \[ \"LOL-palooza\" \]

}, {

\"bandName\" : \"Propeller\",

\"musicFestivals\" : \[ \]

} \],

\"Still Bottom Records\" : \[ {

\"bandName\" : \"Wild Antelope\",

\"musicFestivals\" : \[ \"Trainerella\" \]

} \],

\"XS Recordings\" : \[ {

\"bandName\" : \"Werewolf Weekday\",

\"musicFestivals\" : \[ \"LOL-palooza\" \]

} \]

}

